{"ast":null,"code":"var _jsxFileName = \"C:\\\\Auth\\\\Institute-Food-Review-System-menu-team\\\\Institute-Food-Review-System-menu-team\\\\frontend\\\\src\\\\Components\\\\From\\\\Review2.js\",\n    _s = $RefreshSig$();\n\nimport Navbar from \"../Navbar\";\nimport { useSelector } from \"react-redux\";\nimport { useState } from \"react\";\nimport ReactStars from \"react-rating-stars-component\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Review2() {\n  _s();\n\n  const history = useHistory();\n  const itemdata = useSelector(state => state.foodItem.data);\n  const formlike = useSelector(state => state.defForm.like);\n  const formrating = useSelector(state => state.defForm.rating);\n  const formComment = useSelector(state => state.defForm.Comment);\n\n  if (itemdata.length === 0) {\n    window.location = \"/review\";\n  }\n\n  const [checkedState, setCheckedState] = useState(new Array(itemdata.length).fill(false));\n  const [checkRating, setCheckRating] = useState(new Array(itemdata.length).fill(0));\n\n  const handleOnChange = position => {\n    const updatedCheckedState = checkedState.map((item, index) => index === position ? !item : item);\n    setCheckedState(updatedCheckedState);\n  };\n\n  const SumitHandler = e => {\n    e.preventDefault();\n    let ratingArr = {},\n        itemArr = [];\n    console.log(checkRating);\n\n    for (let i = 0; i < itemdata.length; i++) {\n      if (checkRating[i] > 0) {\n        console.log(itemdata[i], checkRating[i]);\n        ratingArr[itemdata[i]] = checkRating[i];\n      }\n\n      if (checkedState[i] === true) {\n        itemArr.push(itemdata[i]);\n      }\n    }\n\n    console.log(ratingArr);\n\n    if (formlike === \"\" || formrating === 0) {\n      toast.error('Some Error please try again', {\n        position: \"top-center\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n      setTimeout(() => {\n        history.push(\"/review\");\n      }, 2000);\n    } else {\n      let defaultData = {\n        DidLike: formlike === \"Yes\" ? true : false,\n        Rating: formrating,\n        Comment: formComment,\n        UserId: JSON.parse(sessionStorage.getItem('userInfo'))._id,\n        RatingFoods: ratingArr,\n        LikeFoods: itemArr\n      };\n      fetch(process.env.REACT_APP_BACKEND + \"/form/form/\", {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(defaultData)\n      }).then(res => res.json()).then(res => {\n        if (res.message === \"Form save successfully\") {\n          toast.success('Thanks for filling the form', {\n            position: \"top-center\",\n            autoClose: 2000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined\n          });\n          setTimeout(() => {\n            history.push(\"/review\");\n          }, 2000);\n        } else {\n          toast.error('Some Error please try again', {\n            position: \"top-center\",\n            autoClose: 2000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined\n          });\n          setTimeout(() => {\n            history.push(\"/review\");\n          }, 2000);\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: SumitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"toppings-list\",\n        children: itemdata !== undefined && itemdata !== null && itemdata.length !== 0 && itemdata.map((val, index) => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"toppings-list-item\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  id: `custom-checkbox-${index}`,\n                  name: val,\n                  value: val,\n                  checked: checkedState[index],\n                  onChange: () => handleOnChange(index)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: `custom-checkbox-${index}`,\n                  children: val\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 33\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"toppings-list\",\n        children: itemdata !== null && itemdata !== undefined && itemdata.length !== 0 && itemdata.map((val, index) => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: val\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(ReactStars, {\n              count: 5,\n              onChange: value => {\n                const updatedRate = checkRating.map((item, ind) => index === ind ? value : item);\n                setCheckRating(updatedRate);\n              },\n              size: 24,\n              isHalf: true,\n              emptyIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"far fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 48\n              }, this),\n              halfIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-star-half-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 47\n              }, this),\n              fullIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 47\n              }, this),\n              activeColor: \"#ffd700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 33\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-danger\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-center\",\n      autoClose: 2000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true,\n      rtl: false,\n      pauseOnFocusLoss: true,\n      draggable: true,\n      pauseOnHover: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Review2, \"ArRd42iTFz0xoa8GZP/+h0XxmD0=\", false, function () {\n  return [useHistory, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Review2;\n\nvar _c;\n\n$RefreshReg$(_c, \"Review2\");","map":{"version":3,"sources":["C:/Auth/Institute-Food-Review-System-menu-team/Institute-Food-Review-System-menu-team/frontend/src/Components/From/Review2.js"],"names":["Navbar","useSelector","useState","ReactStars","ToastContainer","toast","useHistory","Review2","history","itemdata","state","foodItem","data","formlike","defForm","like","formrating","rating","formComment","Comment","length","window","location","checkedState","setCheckedState","Array","fill","checkRating","setCheckRating","handleOnChange","position","updatedCheckedState","map","item","index","SumitHandler","e","preventDefault","ratingArr","itemArr","console","log","i","push","error","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","setTimeout","defaultData","DidLike","Rating","UserId","JSON","parse","sessionStorage","getItem","_id","RatingFoods","LikeFoods","fetch","process","env","REACT_APP_BACKEND","method","headers","body","stringify","then","res","json","message","success","catch","err","val","value","updatedRate","ind"],"mappings":"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","sourcesContent":["import Navbar from \"../Navbar\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState } from \"react\";\r\nimport ReactStars from \"react-rating-stars-component\";\r\nimport { ToastContainer,toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport default function Review2(){\r\n    const history = useHistory();\r\n    const itemdata = useSelector(state => state.foodItem.data);\r\n    const formlike = useSelector(state => state.defForm.like)\r\n    const formrating = useSelector(state => state.defForm.rating)\r\n    const formComment = useSelector(state => state.defForm.Comment)\r\n    if(itemdata.length === 0){\r\n        window.location = \"/review\";\r\n    }\r\n    const [checkedState, setCheckedState] = useState(\r\n        new Array(itemdata.length).fill(false)\r\n      );\r\n    const [checkRating , setCheckRating] = useState(\r\n        new Array(itemdata.length).fill(0)\r\n    )\r\n\r\n\r\n\r\n    const handleOnChange = (position) => {\r\n        const updatedCheckedState = checkedState.map((item, index) =>\r\n          index === position ? !item : item\r\n        );\r\n        setCheckedState(updatedCheckedState);\r\n    }\r\n\r\n    const SumitHandler = (e) =>{\r\n        e.preventDefault();\r\n        let ratingArr = {} , itemArr = [];\r\n        console.log(checkRating)\r\n        for(let i=0; i<itemdata.length; i++){\r\n            if(checkRating[i] > 0){\r\n                console.log(itemdata[i] , checkRating[i])\r\n                ratingArr[itemdata[i]] = checkRating[i];\r\n            }\r\n            if(checkedState[i] === true){\r\n                itemArr.push(itemdata[i])\r\n            }\r\n        }\r\n        console.log(ratingArr);\r\n        if(formlike === \"\" || formrating === 0){\r\n            toast.error('Some Error please try again', {\r\n                position: \"top-center\",\r\n                autoClose: 2000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            });\r\n            setTimeout(() => {\r\n                history.push(\"/review\")\r\n            }, 2000);\r\n        }\r\n        else{\r\n            let defaultData = {\r\n                DidLike : formlike === \"Yes\" ? true : false,\r\n                Rating : formrating,\r\n                Comment : formComment,\r\n                UserId : JSON.parse(sessionStorage.getItem('userInfo'))._id,\r\n                RatingFoods : ratingArr,\r\n                LikeFoods : itemArr\r\n            }\r\n            fetch(process.env.REACT_APP_BACKEND + \"/form/form/\", {\r\n                method : 'POST',\r\n                headers : {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body : JSON.stringify(defaultData)\r\n            }).then(res => res.json())\r\n            .then((res) => {\r\n                if(res.message === \"Form save successfully\"){\r\n                    toast.success('Thanks for filling the form', {\r\n                        position: \"top-center\",\r\n                        autoClose: 2000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                    setTimeout(() => {\r\n                        history.push(\"/review\")\r\n                    }, 2000);\r\n                }\r\n                else{\r\n                    toast.error('Some Error please try again', {\r\n                        position: \"top-center\",\r\n                        autoClose: 2000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                    });\r\n                    setTimeout(() => {\r\n                        history.push(\"/review\")\r\n                    }, 2000);\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <form onSubmit={SumitHandler}>\r\n                <ul className=\"toppings-list\">\r\n                    {itemdata !== undefined && itemdata !== null && itemdata.length !==0 && itemdata.map((val ,index) => {\r\n                        return (\r\n                            <li key={index}>\r\n                                <div className=\"toppings-list-item\">\r\n                                    <div className=\"left-section\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id={`custom-checkbox-${index}`}\r\n                                        name={val}\r\n                                        value={val}\r\n                                        checked={checkedState[index]}\r\n                                        onChange={() => handleOnChange(index)}\r\n                                    />\r\n                                    <label htmlFor={`custom-checkbox-${index}`}>{val}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        )\r\n                    })}\r\n                </ul>\r\n                <ul className=\"toppings-list\">\r\n                    {itemdata !== null && itemdata !== undefined && itemdata.length !== 0 && itemdata.map((val , index) =>{\r\n                        return (\r\n                            <li key={index}>\r\n                                <h2>{val}</h2>\r\n                                <ReactStars\r\n                                    count={5}\r\n                                    onChange={(value) => {\r\n                                        const updatedRate = checkRating.map((item , ind) => \r\n                                            index === ind ? value : item\r\n                                        )\r\n                                        setCheckRating(updatedRate)\r\n                                    }}\r\n                                    size={24}\r\n                                    isHalf={true}\r\n                                    emptyIcon={<i className=\"far fa-star\"></i>}\r\n                                    halfIcon={<i className=\"fa fa-star-half-alt\"></i>}\r\n                                    fullIcon={<i className=\"fa fa-star\"></i>}\r\n                                    activeColor=\"#ffd700\"\r\n                                />\r\n                            </li>\r\n                        )\r\n                    })}\r\n                </ul>\r\n                <button type=\"submit\" className=\"btn btn-danger\">\r\n                    Submit\r\n                </button>\r\n            </form>\r\n            <ToastContainer\r\n                position=\"top-center\"\r\n                autoClose={2000}\r\n                hideProgressBar={false}\r\n                newestOnTop={false}\r\n                closeOnClick\r\n                rtl={false}\r\n                pauseOnFocusLoss\r\n                draggable\r\n                pauseOnHover\r\n            />\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}